metadata:
  title: GoData Payment Schedule
  short title: Payment Schedule
  comment: An interview to check if you qualify for GoDigital.
---
mandatory: true
code: |
 total_cost
---
question: Payment Schedule
subquestion: |
  press next to see your total
fields:
  - Project cost: total_cost
    datatype: currency
  - Date of Deposit: deposit_date
    datatype: date
    default: |
      ${ today() }
---
Depends: total_cost
code: |
  if int(total_cost)*0.7 > 200000:
    DBJ = int(200000)
    contribution = int(total_cost)-DBJ
  else:
    DBJ = int(total_cost)*0.7
    contribution = int(total_cost)-DBJ
  discount_10 = contribution - contribution*0.1
  discount_07 = contribution - contribution*0.07
  discount_05 = contribution - contribution*0.05
---
question: |
  # Payment Terms
subquestion: |
    DBJ will cover ${currency(DBJ)} which leaves your total contribution at ${currency(contribution)}
    Your downpayment is due on ${deposit_date.plus(days=90)} 
    
    
    We require 50% of your contribution down ${currency(contribution/2)} and the balance within 90 days
    
    
    ### Early payment discounts
    Settle early and benefit from early payment discounts
    
    
    * 10% discount if settled by ${deposit_date.plus(days=30)} 
    <br/>This would reduce your balance to ${currency(discount_10)}
    
    
    * 7% discount if settled by ${deposit_date.plus(days=45)}
    <br/>This would reduce your total contribution to ${currency(discount_07)}
    
    
    * 5% discount if settled by ${deposit_date.plus(days=60)}
    <br/>This would reduce your total contribution to ${currency(discount_05)}
    
    
    Otherwise the balance remains ${currency(contribution)}
  
  
    Do you wish to do another check?
buttons:
  - Exit: exit
  - Restart: restart
mandatory: True